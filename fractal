using System;

namespace Fractals;

internal static class DragonFractalTask
{
    public static void DrawDragonFractal(Pixels pixels, int iterationsCount, int seed)
	{
		var random = new Random(seed);
        var nextNumber = random.Next(2);
        var x = 1.0;
        var y = 0.0;
        var firstAngle = Math.PI / 4;
        var secondAngle = Math.PI / 4 * 3;
        while (iterationsCount > 0)
        {
            iterationsCount--;
            var firstX = x;
            if (nextNumber == 0)
            {
                x = ((x * Math.Cos(firstAngle) - y * Math.Sin(firstAngle)) / Math.Sqrt(2));
                y = ((firstX * Math.Sin(firstAngle) + y * Math.Cos(firstAngle)) / Math.Sqrt(2));
            }
            else
            {
                x = ((x * Math.Cos(secondAngle) - y * Math.Sin(secondAngle)) / Math.Sqrt(2)) + 1;
                y = ((firstX * Math.Sin(secondAngle) + y * Math.Cos(secondAngle)) / Math.Sqrt(2));
            }
            pixels.SetPixel(x, y);
            nextNumber = random.Next(2);
        }
    }
}
